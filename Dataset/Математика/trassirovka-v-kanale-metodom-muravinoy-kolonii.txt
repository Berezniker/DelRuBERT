Известия ЮФУ. Технические науки

Тематический выпуск

УДК 658.512
О.Б. Лебедев
ТРАССИРОВКА В КАНАЛЕ МЕТОДОМ МУРАВЬИНОЙ КОЛОНИИ*
В работе предлагаются новые технологии, принципы и механизмы решения задачи
канальной трассировки, основанные на моделировании процессов адаптивного поведения
муравьиной колонии. Предложенный подход полностью применим для “бессеточной”
трассировки соединений разной ширины. По сравнению с существующими алгоритмами
достигнуто улучшение результатов.
Канальная трассировка; муравьиная колония; оптимизация.
O.B. Lebedev

СHANEL ROUTING BASES ON METHOD OF UNT COLONY
OPTIMIZATION

In work new technologies and mechanisms of the decision of a problem the chanel routing
based on modelling of processes of behaviour of ant colony and collective adaptation are offered.
The offered approach completely is applicable for traces of connections of different width.
In comparison with existing algorithms improvement of results is reached.
Chanel routing; unt colony; optimization.

Введение. В настоящее время резкое повышение функциональной сложности СБИС стимулирует разработку новых эффективных методов и средств их проектирования.
Отдельные попытки [1] применения эволюционного моделирования к задаче
канальной трассировки были достаточно успешными. Однако предложенные
структуры ГА фактически являются “слепыми ” поисковыми структурами с присущими им недостатками: генерация решений с нарушениями, что требует дополнительного контроля; генерация большого количества подобных решений; генерация большого количества “плохих” решений.
В последние годы интенсивно разрабатывается научное направление с названием «Природные вычисления» (Natural Computing), объединяющее математические методы, в которых заложены принципы природных механизмов принятия
решений [2-4]. К таким методам можно отнести, прежде всего, методы моделирования отжига [5], методы эволюционного моделирования [6], генетические алгоритмы [7-9], эволюционной адаптации [10], алгоритмы роевого интеллекта [11,12]
и муравьиные алгоритмы (Ant Colony Optimization – ACO) [13,14]. Идея муравьиного алгоритма – моделирование поведения муравьёв, связанного с их способностью быстро находить кратчайший путь от муравейника к источнику пищи. Основу
поведения муравьиной колонии составляет самоорганизация, обеспечивающая
достижения общих целей колонии на основе низкоуровневого взаимодействия благодаря которому, в целом, колония представляет собой разумную многоагентную
систему. Особенностями являются наличие непрямого обмена, который и используется в муравьиных алгоритмах. Непрямой обмен – стигмержи (stigmergy), представляет собой разнесённое во времени взаимодействие, при котором одна особь
изменяет некоторую область окружающей среды, а другие используют эту информацию позже, когда в неё попадают. Такое отложенное взаимодействие происхо*

Работа выполнена при поддержке: РФФИ (грант № 09-01-00509), г/б № 2.1.2.1652.

46

Раздел I. Эволюционное моделирование, генетические и бионические алгоритмы
дит через специальное химическое вещество – феромон (pheromone). Концентрация феромона на пути определяет предпочтительность движения по нему. При своём движении муравей метит путь феромоном, и эта информация используется другими муравьями для выбора пути. Концентрация феромонов определяет желание
особи выбрать тот или иной путь. Однако, при таком подходе, неизбежно попадание в локальный оптимум. Эта проблема решается благодаря испарению феромонов, которое является отрицательной обратной связью.
В работе используется представление задачи канальной трассировки в виде
адаптивной муравьиной системы на основе сочетания принципов самообучения,
самоорганизации и коллективной адаптации.
Формулировка проблемы канальной трассировки. Канал представляет
собой область, ограниченную двумя линейками контактов. На область трассировки наносится опорная ортогональная сеть, по линиям которой проходят трассы.
Вертикальные линии проходят через контакты. Горизонтальные линии называют
магистралями. Контакты в линейке пронумерованы слева направо и помечены номерами подходящих к ним цепей. Некоторые цепи могут распространяться за левую и правую границы канала
При канальной трассировке каждая цепь, связывающая эквипотенциальные
выводы, представляется в виде набора горизонтальных и вертикальных фрагментов (участков). Задача трассировки в канале (ЗКТ) рассматривается как задача распределения фиксированного множества горизонтальных участков F={fi|i=1,2,...,n}
в множестве магистралей M={mj|j=1,2,...,}.
Муравьиный алгоритм разработан для следующей постановки ЗКТ.
Дано: верхний ряд контактов T={t1,t2,....ti} и нижний ряд контактов
B={b1,b2,....bi}.

К верхнему ряду контактов подходит соответственно множество цепей
NT={nti|i=1,2,...l}, а к нижнему – соответственно множество цепей NB={nbi |i=1,2,....l},
NT ∪ NB =N. Геометрия вертикальных участков, связывающих горизонтальные участки с верхней и нижней линейкой контактов, полностью определяется месторасположением горизонтальных участков. Из всех контактов цепи проводят вертикальные сечения. Горизонтальный участок между двумя соседними сечениями рассматривается как горизонтальный фрагмент, связанный вертикальными участками
с соответствующими контактами.
Не допускаются наложения друг на друга принадлежащих различным цепям
вертикальных или горизонтальных фрагментов. Для учета этих ограничений вводятся граф вертикальных ограничений (ГВО) – GV и граф горизонтальных ограничений (ГГО) – GH. GV=(V, E), где V – множество вершин, соответствующих горизонтальным фрагментам, ek=(vi,vj)∈ E – направленное ребро, указывающее на то,
что vi должна располагаться над vj. GH=(V,U), а uk=(vi,vj) ∈U – ребро, указывающее
на то, что vi и vj должны располагаться в различных магистралях. В общем случае
допускаются изломы горизонтальных фрагментов. Предполагается, что путем ввода изломов фрагментов в ГВО GV исключены все циклы.
Таким образом, имеется сформированное множество F={fi|i=1,2,...,n} фрагментов. Необходимо, в соответствии с ограничениями GH и GV, разместить их в
минимальном числе магистралей.
Обозначим через li – левый конец фрагмента fi, а через ri – правый конец.
Пусть x(li), x(ri) – координаты позиционирования fi по оси X, распространяющейся
вдоль ряда контактов.
47

Известия ЮФУ. Технические науки

Тематический выпуск

Для построения базовой процедуры поиска и метода представления решения
ЗКТ воспользуемся известным алгоритмом “левого конца”, cуть которого в следующем [1]. Магистрали для заполнения фрагментами цепей выбираются последовательно, начиная с первой. Каждая выбранная магистраль последовательно (слева
направо) заполняется фрагментами цепей. На некотором шаге после занесения в
заполняемую магистраль mn некоторого фрагмента fi среди множества еще не размещенных фрагментов отыскивается фрагмент fj такой, чтобы выполнялись условия размещения:
a) fj может размещаться в магистрали mn с учетом уже размещенных фрагментов, в соответствии с GH и GV;
б) О(lj)>О(ri).
Если фрагментов, соответствующих условиям размещения нет, а множество
еще не размещенных фрагментов не пусто, то для размещения выбирается следующая по порядку магистраль. Проблема заключается в выборе для размещения в
mn одного из альтернативных кандидатов, отвечающих вышеперечисленным условиям. В простейшем случае выбирается fj такой, чтобы (О(lj)-О(ri)) → min , т.е.
выбирается ближайший к fi фрагмент fj. Однако такой подход не обеспечивает оптимального решения.
Упорядочим фрагменты fi в виде той последовательности Пp, в которой они
выбирается алгоритмом “левого конца”. Очевидно, что существует последовательность Попт такая, что, если осуществлять последовательное заполнение магистралей фрагментами в соответствии с последовательностью Попт, получится оптимальное решение.
На рис. 1 представлено оптимальное (по числу занимаемых магистралей) решение. Оптимальная последовательность (упорядоченный список) имеет вид:

Попт=< f1, f4, f6, f3, f5, f10, f11, f7, f2, f12, f13, f14, f8, f9>.

Фактически Попт является решением ЗКТ. Отличительной особенностью
(свойством) любой последовательности Пp, полученной с помощью алгоритма “левого конца”, в том числе и Попт, является следующее.

Рис. 1. Оптимальное решение задачи трассировки в канале.
Для любого фрагмента fi в списке Пp все фрагменты, под которыми fi должен
располагаться в соответствии с Gv, расположены слева от fi , а все фрагменты, над
которыми в соответствии с Gv должен располагаться fi, в списке Пp, расположены
справа от fi.

48

Раздел I. Эволюционное моделирование, генетические и бионические алгоритмы
Назовем любую последовательность с вышеперечисленными свойствами решением ЗКТ. Сопоставим решению Пp оценку Фp – число занимаемых магистралей. Тогда ЗКТ сводится к нахождению решения, для которого Фопт → min{Фp}.
Механизмы канальной трассировки на основе муравьиной колонии. Для
поиска решения задачи используется полный граф решений R(F, E), где множество вершин F соответствует множеству фрагментов, E – множество всех ребер полного графа, связывающих множество вершин F. Отобразим некоторый список Пp,
являющийся решением ЗКТ, в виде маршрута Sp на графе решений R(F, E). Последовательность вершин в маршруте Sp соответствует последовательности соответствующих элементов в списке Пp. Задачей каждого муравья является построение на
графе R маршрута Sk, являющегося решением ЗКТ, где k – номер агента. Задачей
колонии муравьев является нахождение маршрута с лучшей оценкой. Каждый муравей откладывает на ребрах построенного маршрута феромон. На начальном этапе на всех ребрах графа R откладывается одинаковое (небольшое) количество феромона, равное Q/m, где m=|E|. Формирование маршрута Sk осуществляется последовательно (пошагово). На каждом шаге t у k-ого агента есть номер формируемой
магистрали, список вершин графа R, уже включенных в формируемый маршрут –
F1k(t) и список оставшихся (не вошедших) вершин Fсk(t), F1k(t)∪Fсk(t)=F.
В силу симметричности канала заполнение магистралей фрагментами можно
осуществлять четырьмя способами. Первый способ: магистрали нумеруются сверху вниз и заполняются фрагментами слева направо. Второй способ: магистрали
нумеруются сверху вниз и заполняются фрагментами справа налево. Третий способ: магистрали нумеруются снизу вверх и заполняются фрагментами слева направо. Четвертый способ: магистрали нумеруются снизу вверх и заполняются фрагментами справа налево. Для каждого u-го способа формируется группа фрагментов
Qu, каждый из которых служит отправной точкой при формировании маршрутов.
Условие, на основании которого осуществляется формирование Q1 и Q3, заключается в следующем. Для фрагмента fi, включаемого в Q1 и Q3 не существует фрагмента fj, который может быть размещен в первой магистрали слева от fi без нарушения ограничений, задаваемых GH и GV. Условие, на основании которого осуществляется формирование Q2 и Q4, заключается в следующем. Для фрагмента fi,
включаемого в Q2 и Q4 не существует фрагмента fj, который может быть размещен
в первой магистрали справа от fi без нарушения ограничений, задаваемых GH и GV.
Другими словами, любой маршрут, формируемый u-м способом, в качестве отправной точки использует фрагмент fi∈ Ql.
Построение маршрутов осуществляется четырьмя группами муравьев. Муравьи u-ой группы формируют маршруты по u-му способу. Число муравьев в u-ой
группе равно числу фрагментов в группе Qu, причем за каждым муравьем закреплен один из фрагментов fi∈Qu, используемый в качестве отправной точки при формировании маршрута. Такое распределение необходимо, чтобы все вершины множества Qu имели одинаковые шансы быть отправной точкой при формировании
маршрутов.
На первом шаге в каждый формируемый u-м способом маршрут Suk(t), где
t=1, включается вершина множества Qu, причем вершины множества Qu распределяются по узлам равномерно, то есть в каждом маршруте своя отправная вершина,
(∀i,j)[Sik(1)∩Sjk(1)=∅]. В модификациях алгоритма за каждым из фрагментов
fi∈Qu, закрепляется y муравьев, причем каждый из y муравьев использует в качестве начального одно и то же Slk(1). На конечном шаге t=n k-м агентом будет сформирован маршрут Suk (n)= Suk.

49

Известия ЮФУ. Технические науки

Тематический выпуск

Моделирование поведения муравьёв в задаче канальной трассировки связано
с распределением феромона на ребрах графа R. При этом вероятность включения
на шаге t+1 вершины fj∈R в формируемый отдельным муравьем маршрут Suk, пропорциональна количеству феромона на ребре, связывающему вершину fj с последней вершиной в Suk(t). Количество феромона, откладываемого на ребрах построенного маршрута, пропорционально числу магистралей, на которых уложены фрагменты в порядке, задаваемым построенным маршрутом. Чем меньше число магистралей, тем больше феромона будет отложено на рёбрах маршрута, следовательно, большее количество муравьёв будет включать эти рёбра в собственные маршруты. Для избегания преждевременной сходимости используется отрицательная
обратная связь в виде испарения феромона. Процесс поиска решений итерационный. Каждая итерация l включает три этапа. На первом этапе каждый муравей находит решение (строит маршрут), на втором этапе откладывает феромон, на третьем этапе осуществляется испарения феромона. В работе используется циклический
(ant-cycle) метод муравьиных систем. В этом случае ферромоны откладываются
агентом на ребрах после полного формирования решения.
На первом этапе каждой итерации каждый k-ый муравей формирует свой собственный маршрут Suk. Процесс построения маршрута Suk пошаговый. На каждом
шаге агент применяет вероятностное правило выбора следующей вершины для
включения ее формируемый маршрут Suk(t).
Первый этап осуществляется следующим образом. Пусть к данному моменту
сформирован маршрут Suk(t), fz - последняя вершина маршрута Suk(t). Агент просматривает множество всех свободных на данном шаге вершин Fсk(t) и выделяет из
него подмножество вершин F*сk(t), удовлетворяющих рассмотренному выше условию размещения фрагментов в текущей магистрали
Для каждой вершины fi∈ F*сk(t) рассчитываются три параметра:
hiz – суммарный уровень феромона на ребре графа R, связывающем fi с последней вершиной fz маршрута Suk(t);
dik = (О(lj)-О(ri)) – расстояние между fi и fz ;
wik – число связей fi с верхней линейкой контактов при первом и втором способе построения маршрута или с нижней линейкой контактов при третьем и четвертом способе построения маршрута
По формуле (1) – при мультипликативной свертке, либо по формуле (2) – при
аддитивной свертке определяется потенциальная стоимость Cik связи fi с Suk(t).
Cik=(hiz)α ·(wik)γ /(diz)β
Cik = α· (hiz) + β/diz)+ γ·(wik),

(1)
(2)

где α, β, γ – управляющие параметры, которые подбираются экспериментально.
Вероятность Pik включения вершины fi∈F*сk(t) в формируемый маршрут
Suk(t)определяется следующим соотношением
Pik=Ciz/ ∑ Ciz .
i

(3)

Агент с вероятностью Pik выбирает одну из вершин fi∈F*сk(t), которая включается в маршрут Suk(t), маршрут уже обозначается как Suk(t+1), а fi исключается из
множества Fсk(t).
При α = 0 наиболее вероятен выбор ближайшего к fz фрагмента fi, то есть алгоритм становится подобным алгоритму “левого конца”.
При β = 0 выбор происходит только на основании феромона, что приводит к
субоптимальным решениям.
50

Раздел I. Эволюционное моделирование, генетические и бионические алгоритмы
Поэтому необходим компромисс между этими величинами, который находится экспериментально. Учет параметра wik способствует сокращению числа вертикальных ограничений в множестве еще не вошедших в маршрут вершин Fсk(t),
что косвенным образом способствует упрощению построений и минимизации целевой оценки – числа магистралей.
После формирования за n шагов муравьями маршрутов (каждый муравей –
свой маршрут), на втором этапе итерации, каждый k-ый муравей откладывает феромон на рёбрах построенного им маршрута.
Количество феромона ∆τk(l), откладываемое k-ым муравьем на каждом ребре маршрута, построенного на l-ой итерации, определяется следующим образом:
∆τk(l)= Q /Dk(l),

(4)

где l – номер итерации, Q – общее количество феромона, откладываемое k-ым муравьем на ребрах маршрута, Dk(l) – число магистралей, использованных k-ым муравьем на l-ой итерации при прокладке маршрута. (Другими словами, целевая
функция для данного решения.)
После того, как каждый агент сформировал решение и отложил феромон, на
третьем этапе происходит общее испарение феромона на ребрах полного графа R в
соответствии с формулой (5).
fik = fik(1- ρ),

(5)

где ρ – коэффициент обновления (0.93-0.99).
После выполнения всех действий на итерации находится агент с лучшим решением, которое запоминается. Далее осуществляется переход на следующую итерацию. Временная сложность этого алгоритма зависит от времени жизни колонии l
(число итераций), количества вершин графа n и числа муравьев y, и определяется
как O(l*n2*y).
Предложенный подход полностью применим для “бессеточной” трассировки
соединений разной ширины. Модернизированная процедура построения маршрута
будет последовательно размещать фрагменты, ”прижимая ” их на допустимую величину к ранее размещенным. Результатом работы будут физические координаты
размещенных фрагментов.
Тестирование разработанных алгоритмов КТ и их сравнение с известными
производилось на бенчмарках Ex1, Ex3b, Ex3c, Ex4b, Ex5 и трудном примере Дойча. По сравнению с существующими алгоритмами достигнуто улучшение результатов. Перспективными путями улучшения муравьиного алгоритма канальной
трассировки являются различные адаптации параметров с использованием базы
нечётких правил и их гибридизация с генетическими алгоритмами. Как вариант,
такая гибридизация может состоять в обмене через определённые промежутки
времени текущими наилучшими решениями.
БИБЛИОГРАФИЧЕСКИЙ СПИСОК
1. Naveed Sherwani. Algorithms for VLSI physical design automation. Kluwer academic publishers. Boston/Dordrecht/ London. 1995.
2. G. Di Caro, F. Ducatelle, L. M. Gambardella. AntHocNet: An adaptive nature-inspired algorithm for routing in mobile ad hoc networks. European Transactions on Telecommunications,
16(5):443-455, 2005.
3. Engelbrecht A.P. Fundamentals of Computational Swarm Intelligence. John Wiley & Sons,
Chichester, UK, 2005.

51

Известия ЮФУ. Технические науки

Тематический выпуск

МакКоннелл Дж

4.
. Основы современных алгоритмов. Москва, Техносфера, 2004.
5. Wong D.F., Leong H.W., and Simulated C.L.Lin Annealing for VLSI Design. Boston, MA:
Kluwer Academic, 1988.
6.
. .,
. .,
. . Теория и практика эволюционного моделирования. – М.: Физматлит, 2003.
7.
azumder P., Rudnick E. Genetic Algorithm For VLSI Design, Layout & Test Automation.
India, Pearson Education, 2003.
8.
. .,
. . Трассировка в канале на основе коллективной адаптации
// Труды Международных НТК IEEE AIS’05, CAD 2005. – М: Физматлит, 2005. – C. 58-63.
9.
. . Интеллектуальные процедуры синтеза топологии СБИС. – Таганрог: Издво ТРТУ, 2003.
10.
. .,
. .,
. . Поисковая адаптация: теория и практика.
– М.: Физматлит, 2006.
11. Clerc M. Particle Swarm Optimization. ISTE, London, UK, 2006.
12. Poli R. Analysis of the publications on the applications of particle swarm optimisation. Journal
of Artificial Evolution and Applications, Article ID 685175, 10 pages, 2008.
13. Dorigo M. and Stützle T. Ant Colony Optimization. MIT Press, Cambridge, MA, 2004.
14.
. . Муравьиные алгоритмы // Exponenta Pro. Математика в приложениях
– 2003, №4.

Емельянов В В Курейчик В М Курейчик В В
М
Лебедев Б К Лебедев О Б
Лебедев Б К
Курейчик В М Лебедев Б К Лебедев О Б

Штовба С Д

Лебедев Олег Борисович

Технологический институт федерального государственного образовательного учреждения высшего профессионального образования «Южный федеральный университет»
в г. Таганроге.
E-mail: lbk@tsure.ru.
347928, г. Таганрог, пер. Некрасовский, 44.
Тел.: 8(8634)371-743.

Кафедра систем автоматизированного проектирования; доцент.

Lebedev Oleg Borisovich.
Taganrog Institute of Technology – Federal State-Owned Educational Establishment of
Higher Vocational Education “Southern Federal University”.
E-mail: lbk@tsure.ru.
44, Nekrasovskiy, Taganrog, 347928, Russia.
Phone: 8(8634)371-743.
Department of Computer Aided Design; associate professor.

УДК 681.3.001.63

И.А. Шкамардин

ПРОБЛЕМЫ И ПЕРСПЕКТИВЫ РАЗВИТИЯ ЭВОЛЮЦИОННОЙ
ЭЛЕКТРОНИКИ
*

В статье дается обзор состояния эволюционной электроники. Рассматриваются
основные направления применения эволюционных методов при проектировании электронных схем. Приводится алгоритм, лежащий в основе эволюционного проектирования радиоэлектронных схем.
Эволюционная электроника; эволюционные алгоритмы; проектирование схем.

*

Работа выполнена при поддержке: (грант № 07-01-00174), г/б № 2.1.2.1652.

52

